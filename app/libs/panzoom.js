!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.panzoom=t():e.panzoom=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(1),i=n(2),a=n(4),c=n(5),u=n(6)(),f=n(7),l=n(8),s=n(9),d=.065,m=1.75,p=300;function v(e,t){var n=(t=t||{}).controller;if(n||(e instanceof SVGElement&&(n=l(e,t)),e instanceof HTMLElement&&(n=s(e,t))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var v=n.getOwner(),g={x:0,y:0},b=!1,x=new f;n.initTransform&&n.initTransform(x);var E,S="function"==typeof t.filterKey?t.filterKey:h,M="number"==typeof t.pinchSpeed?t.pinchSpeed:1,D=t.bounds,O="number"==typeof t.maxZoom?t.maxZoom:Number.POSITIVE_INFINITY,k="number"==typeof t.minZoom?t.minZoom:0,A="number"==typeof t.boundsPadding?t.boundsPadding:.05,C="number"==typeof t.zoomDoubleClickSpeed?t.zoomDoubleClickSpeed:m,P=t.beforeWheel||h,T="number"==typeof t.zoomSpeed?t.zoomSpeed:d,L="boolean"==typeof t.zoomOnUpDownArrow&&t.zoomOnUpDownArrow;!function(e){var t=o(e);if("undefined"===t||"boolean"===t)return;if(!(y(e.left)&&y(e.top)&&y(e.bottom)&&y(e.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}(D),t.autocenter&&function(){var e,t,o=0,r=0,i=U();if(i)o=i.left,r=i.top,e=i.right-i.left,t=i.bottom-i.top;else{var a=v.getBoundingClientRect();e=a.width,t=a.height}var c=n.getBBox();if(0===c.width||0===c.height)return;var u=t/c.height,f=e/c.width,l=Math.min(f,u);x.x=-(c.left+c.width/2)*l+e/2+o,x.y=-(c.top+c.height/2)*l+t/2+r,x.scale=l}();var z,j,B,F,I,N,Y,X=0,q=!1,R=!1;F="smoothScroll"in t&&!t.smoothScroll?{start:h,stop:h,cancel:h}:c(function(){return{x:x.x,y:x.y}},function(e,t){ge(),W(e,t)},t.smoothScroll);var V=!1;ee();var Z={dispose:function(){te()},moveBy:$,moveTo:W,centerOn:function(e){var t=e.ownerSVGElement;if(!t)throw new Error("ui element is required to be within the scene");var n=e.getBoundingClientRect(),o=n.left+n.width/2,r=n.top+n.height/2,i=t.getBoundingClientRect(),a=i.width/2-o,c=i.height/2-r;$(a,c,!0)},zoomTo:we,zoomAbs:Q,smoothZoom:ye,showRectangle:function(e){var t=v.getBoundingClientRect(),n=_(t.width,t.height),o=e.right-e.left,r=e.bottom-e.top;if(!Number.isFinite(o)||!Number.isFinite(r))throw new Error("Invalid rectangle");var i=n.x/o,a=n.y/r,c=Math.min(i,a);x.x=-(e.left+o/2)*c+n.x/2,x.y=-(e.top+r/2)*c+n.y/2,x.scale=c},pause:function(){te(),V=!0},resume:function(){V&&(ee(),V=!1)},isPaused:function(){return V},getTransform:function(){return x},getMinZoom:function(){return k},getMaxZoom:function(){return O}};return a(Z),Z;function _(e,t){if(n.getScreenCTM){var o=n.getScreenCTM(),r=o.a,i=o.d,a=o.e,c=o.f;g.x=e*r-a,g.y=t*i-c}else g.x=e,g.y=t;return g}function W(e,t){x.x=e,x.y=t,K(),Se("pan"),H()}function G(e,t){W(x.x+e,x.y+t)}function K(){var e=U();if(e){var t,o,r,i,a=!1,c=(t=n.getBBox(),r=t.left,i=t.top,{left:(o={x:r*x.scale+x.x,y:i*x.scale+x.y}).x,top:o.y,right:t.width*x.scale+o.x,bottom:t.height*x.scale+o.y}),u=e.left-c.right;return u>0&&(x.x+=u,a=!0),(u=e.right-c.left)<0&&(x.x+=u,a=!0),(u=e.top-c.bottom)>0&&(x.y+=u,a=!0),(u=e.bottom-c.top)<0&&(x.y+=u,a=!0),a}}function U(){if(D){if("boolean"==typeof D){var e=v.getBoundingClientRect(),t=e.width,n=e.height;return{left:t*A,top:n*A,right:t*(1-A),bottom:n*(1-A)}}return D}}function H(){b=!0,E=window.requestAnimationFrame(ne)}function J(e,t,n){if(w(e)||w(t)||w(n))throw new Error("zoom requires valid numbers");var o=x.scale*n;if(o<k){if(x.scale===k)return;n=k/x.scale}if(o>O){if(x.scale===O)return;n=O/x.scale}var r=_(e,t);(x.x=r.x-n*(r.x-x.x),x.y=r.y-n*(r.y-x.y),D&&1===A&&1===k)?(x.scale*=n,K()):K()||(x.scale*=n);Se("zoom"),H()}function Q(e,t,n){J(e,t,n/x.scale)}function $(e,t,n){if(!n)return G(e,t);I&&I.cancel();var o=0,r=0;I=i({x:0,y:0},{x:e,y:t},{step:function(e){G(e.x-o,e.y-r),o=e.x,r=e.y}})}function ee(){v.addEventListener("mousedown",le),v.addEventListener("dblclick",fe),v.addEventListener("touchstart",re),v.addEventListener("keydown",oe),r.addWheelListener(v,ve),H()}function te(){r.removeWheelListener(v,ve),v.removeEventListener("mousedown",le),v.removeEventListener("keydown",oe),v.removeEventListener("dblclick",fe),v.removeEventListener("touchstart",re),E&&(window.cancelAnimationFrame(E),E=0),F.cancel(),me(),pe(),Ee()}function ne(){b&&(b=!1,n.applyTransform(x,n.getOwner().firstChild),Se("transform"),E=0)}function oe(e){var t=0,n=0,o=0;if(38===e.keyCode?L?(e.preventDefault(),e.stopPropagation(),o=-1):n=1:40===e.keyCode?L?(e.preventDefault(),e.stopPropagation(),o=1):n=-1:37===e.keyCode?t=1:39===e.keyCode?t=-1:189===e.keyCode||109===e.keyCode?o=1:187!==e.keyCode&&107!==e.keyCode||(o=-1),!S(e,t,n,o)){if(t||n){e.preventDefault(),e.stopPropagation();var r=v.getBoundingClientRect(),i=Math.min(r.width,r.height);$(.05*i*t,.05*i*n)}if(o){var a=be(o),c=v.getBoundingClientRect();we(c.width/2,c.height/2,a)}}}function re(e){if(function(e){if(t.onTouch&&!t.onTouch(e))return;e.stopPropagation(),e.preventDefault()}(e),1===e.touches.length)return function(e){var t=he(e.touches[0]);z=t.x,j=t.y,F.cancel(),ie()}(e,e.touches[0]);2===e.touches.length&&(B=ue(e.touches[0],e.touches[1]),Y=!0,ie())}function ie(){q||(q=!0,document.addEventListener("touchmove",ae),document.addEventListener("touchend",ce),document.addEventListener("touchcancel",ce))}function ae(e){if(1===e.touches.length){e.stopPropagation();var t=he(e.touches[0]),n=t.x-z,o=t.y-j;0!==n&&0!==o&&xe(),z=t.x,j=t.y;var r=_(n,o);$(r.x,r.y)}else if(2===e.touches.length){Y=!0;var i=e.touches[0],a=e.touches[1],c=ue(i,a),u=1+(c/B-1)*M;z=(i.clientX+a.clientX)/2,j=(i.clientY+a.clientY)/2,we(z,j,u),B=c,e.stopPropagation(),e.preventDefault()}}function ce(e){if(e.touches.length>0){var t=he(e.touches[0]);z=t.x,j=t.y}else{var n=new Date;n-X<p&&ye(z,j,C),X=n,q=!1,Ee(),pe()}}function ue(e,t){var n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}function fe(e){!function(e){t.onDoubleClick&&!t.onDoubleClick(e)||(e.preventDefault(),e.stopPropagation())}(e);var n=he(e);ye(n.x,n.y,C)}function le(e){if(q)return e.stopPropagation(),!1;if(1===e.button&&null!==window.event||0===e.button){F.cancel();var t=he(e),n=_(t.x,t.y);return z=n.x,j=n.y,document.addEventListener("mousemove",se),document.addEventListener("mouseup",de),u.capture(e.target||e.srcElement),!1}}function se(e){if(!q){xe();var t=he(e),n=_(t.x,t.y),o=n.x-z,r=n.y-j;z=n.x,j=n.y,$(o,r)}}function de(){u.release(),Ee(),me()}function me(){document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",de),R=!1}function pe(){document.removeEventListener("touchmove",ae),document.removeEventListener("touchend",ce),document.removeEventListener("touchcancel",ce),R=!1,Y=!1}function ve(e){if(!P(e)){F.cancel();var t=be(e.deltaY);if(1!==t){var n=he(e);we(n.x,n.y,t),e.preventDefault()}}}function he(e){var t=v.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function ye(e,t,n){var o=x.scale,r={scale:o},a={scale:n*o};F.cancel(),ge(),N=i(r,a,{step:function(n){Q(e,t,n.scale)}})}function we(e,t,n){return F.cancel(),ge(),J(e,t,n)}function ge(){N&&(N.cancel(),N=null)}function be(e){var t=1;return e>0?t=1-T:e<0&&(t=1+T),t}function xe(){R||(Se("panstart"),R=!0,F.start())}function Ee(){R&&(Y||F.stop(),Se("panend"))}function Se(e){Z.fire(e,Z)}}function h(){}function y(e){return Number.isFinite(e)}function w(e){return Number.isNaN?Number.isNaN(e):e!=e}e.exports=v,function(){if("undefined"!=typeof document){var e=document.getElementsByTagName("script");if(e){for(var t,n=0;n<e.length;++n){var o=e[n];if(o.src&&o.src.match(/\bpanzoom(\.min)?\.js/)){t=o;break}}if(t){var r=t.getAttribute("query");if(r){var i=t.getAttribute("name")||"pz",a=Date.now();!function e(){var n=document.querySelector(r);if(!n){return Date.now()-a<2e3?void setTimeout(e,100):void console.error("Cannot find the panzoom element",i)}var o=function(e){for(var t=e.attributes,n={},o=0;o<t.length;++o){var r=c(t[o]);r&&(n[r.name]=r.value)}return n}(t);console.log(o);window[i]=v(n,o)}()}}}}function c(e){if(e.name&&("p"===e.name[0]&&"z"===e.name[1]&&"-"===e.name[2]))return{name:e.name.substr(3),value:JSON.parse(e.value)}}}()},function(e,t){e.exports=a,e.exports.addWheelListener=a,e.exports.removeWheelListener=function(e,t,n){u(e,r,t,n),"DOMMouseScroll"==r&&u(e,"MozMousePixelScroll",t,n)};var n,o,r,i="";function a(e,t,n){c(e,r,t,n),"DOMMouseScroll"==r&&c(e,"MozMousePixelScroll",t,n)}function c(e,t,o,a){e[n](i+t,"wheel"==r?o:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:e.clientX,clientY:e.clientY,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){e.stopImmediatePropagation&&e.stopImmediatePropagation()}};return"mousewheel"==r?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,o(t)},a||!1)}function u(e,t,n,r){e[o](i+t,n,r||!1)}!function(e,t){e&&e.addEventListener?(n="addEventListener",o="removeEventListener"):(n="attachEvent",o="detachEvent",i="on");r=t?"onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document)},function(e,t,n){var o=n(3),r={ease:o(.25,.1,.25,1),easeIn:o(.42,0,1,1),easeOut:o(0,0,.58,1),easeInOut:o(.42,0,.58,1),linear:o(0,0,1,1)};function i(){}function a(){var e=new Set,t=new Set,n=0;return{next:o,cancel:o,clearAll:function(){e.clear(),t.clear(),cancelAnimationFrame(n),n=0}};function o(e){t.add(e),n||(n=requestAnimationFrame(r))}function r(){n=0;var o=t;t=e,(e=o).forEach(function(e){e()}),e.clear()}}e.exports=function(e,t,n){var o=Object.create(null),a=Object.create(null),c="function"==typeof(n=n||{}).easing?n.easing:r[n.easing];c||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),c=r.ease);var u="function"==typeof n.step?n.step:i,f="function"==typeof n.done?n.done:i,l=function(e){if(!e){return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!=typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(n.scheduler),s=Object.keys(t);s.forEach(function(n){o[n]=e[n],a[n]=t[n]-e[n]});var d,m="number"==typeof n.duration?n.duration:400,p=Math.max(1,.06*m),v=0;return d=l.next(function t(){var n=c(v/p);v+=1;!function(t){s.forEach(function(n){e[n]=a[n]*t+o[n]})}(n);v<=p?(d=l.next(t),u(e)):(d=0,setTimeout(function(){f(e)},0))}),{cancel:function(){l.cancel(d),d=0}}},e.exports.makeAggregateRaf=a,e.exports.sharedScheduler=a()},function(e,t){var n=4,o=.001,r=1e-7,i=10,a=11,c=1/(a-1),u="function"==typeof Float32Array;function f(e,t){return 1-3*t+3*e}function l(e,t){return 3*t-6*e}function s(e){return 3*e}function d(e,t,n){return((f(t,n)*e+l(t,n))*e+s(t))*e}function m(e,t,n){return 3*f(t,n)*e*e+2*l(t,n)*e+s(t)}function p(e){return e}e.exports=function(e,t,f,l){if(!(0<=e&&e<=1&&0<=f&&f<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&f===l)return p;for(var s=u?new Float32Array(a):new Array(a),v=0;v<a;++v)s[v]=d(v*c,e,f);function h(t){for(var u=0,l=1,p=a-1;l!==p&&s[l]<=t;++l)u+=c;var v=u+(t-s[--l])/(s[l+1]-s[l])*c,h=m(v,e,f);return h>=o?function(e,t,o,r){for(var i=0;i<n;++i){var a=m(t,o,r);if(0===a)return t;t-=(d(t,o,r)-e)/a}return t}(t,v,e,f):0===h?v:function(e,t,n,o,a){var c,u,f=0;do{(c=d(u=t+(n-t)/2,o,a)-e)>0?n=u:t=u}while(Math.abs(c)>r&&++f<i);return u}(t,u,u+c,e,f)}return function(e){return 0===e?0:1===e?1:d(h(e),t,l)}}},function(e,t){e.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}(e);var t=function(e){var t=Object.create(null);return{on:function(n,o,r){if("function"!=typeof o)throw new Error("callback is expected to be a function");var i=t[n];return i||(i=t[n]=[]),i.push({callback:o,ctx:r}),e},off:function(n,o){if(void 0===n)return t=Object.create(null),e;if(t[n])if("function"!=typeof o)delete t[n];else for(var r=t[n],i=0;i<r.length;++i)r[i].callback===o&&r.splice(i,1);return e},fire:function(n){var o,r=t[n];if(!r)return e;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<r.length;++i){var a=r[i];a.callback.apply(a.ctx,o)}return e}}}(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,t,o){"object"!==n(o)&&(o={});var r,i,a,c,u,f,l,s,d,m,p="number"==typeof o.minVelocity?o.minVelocity:5,v="number"==typeof o.amplitude?o.amplitude:.25,h=342;return{start:function(){r=e(),f=d=c=l=0,i=new Date,window.clearInterval(a),window.cancelAnimationFrame(m),a=window.setInterval(y,100)},stop:function(){window.clearInterval(a),window.cancelAnimationFrame(m);var t=e();u=t.x,s=t.y,i=Date.now(),(c<-p||c>p)&&(u+=f=v*c);(l<-p||l>p)&&(s+=d=v*l);m=window.requestAnimationFrame(w)},cancel:function(){window.clearInterval(a),window.cancelAnimationFrame(m)}};function y(){var t=Date.now(),n=t-i;i=t;var o=e(),a=o.x-r.x,u=o.y-r.y;r=o;var f=1e3/(1+n);c=.8*a*f+.2*c,l=.8*u*f+.2*l}function w(){var e=Date.now()-i,n=!1,o=0,r=0;f&&((o=-f*Math.exp(-e/h))>.5||o<-.5?n=!0:o=f=0),d&&((r=-d*Math.exp(-e/h))>.5||r<-.5?n=!0:r=d=0),n&&(t(u+o,s+r),m=window.requestAnimationFrame(w))}}},function(e,t){function n(e){return e.stopPropagation(),!1}e.exports=function(){var e,t,o;return{capture:function(r){t=window.document.onselectstart,o=window.document.ondragstart,window.document.onselectstart=n,(e=r).ondragstart=n},release:function(){window.document.onselectstart=t,e&&(e.ondragstart=o)}}}},function(e,t){e.exports=function(){this.x=0,this.y=0,this.scale=1}},function(e,t){e.exports=function(e,t){if(!(e instanceof SVGElement))throw new Error("svg element is required for svg.panzoom to work");var n=e.ownerSVGElement;if(!n)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");t.disableKeyboardInteraction||n.setAttribute("tabindex",0);return{getBBox:function(){var t=e.getBBox();return{left:t.x,top:t.y,width:t.width,height:t.height}},getScreenCTM:function(){return n.getScreenCTM()},getOwner:function(){return n},applyTransform:function(t){e.setAttribute("transform","matrix("+t.scale+" 0 0 "+t.scale+" "+t.x+" "+t.y+")")},initTransform:function(t){var o=e.getScreenCTM();t.x=o.e,t.y=o.f,t.scale=o.a,n.removeAttributeNS(null,"viewBox")}}}},function(e,t){e.exports=function(e,t){if(!(e instanceof HTMLElement))throw new Error("svg element is required for svg.panzoom to work");var n=e.parentElement;if(!n)throw new Error("Do not apply panzoom to the detached DOM element. ");e.scrollTop=0,t.disableKeyboardInteraction||n.setAttribute("tabindex",0);return{getBBox:function(){return{left:0,top:0,width:e.clientWidth,height:e.clientHeight}},getOwner:function(){return n},applyTransform:function(t,n){e.style.transformOrigin="center";var o=t.scale,r=t.x,i=t.y,a=n.style.transform.indexOf("rotate"),c="";a>-1&&(c=n.style.transform.substring(a));var u="scaleX(".concat(o,") skewY(0) skewX(0) scaleY(").concat(o,") translateX(").concat(r,"px) translateY(").concat(i,"px) ").concat(c);e.style.transform=u}}}}])});